---
title: "로또 당첨번호 시각화"
author: "Your Name"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
# 패키지 설치
if (!requireNamespace("rvest", quietly = TRUE)) {
  install.packages("rvest")
}
if (!requireNamespace("dplyr", quietly = TRUE)) {
  install.packages("dplyr")
}
if (!requireNamespace("ggplot2", quietly = TRUE)) {
  install.packages("ggplot2")
}

# 패키지 로드
library(rvest)
library(dplyr)
library(ggplot2)
```

You can add options to executable code like this

```{r}
# Function to get lotto numbers for a specific round
get_lotto_numbers <- function(round) {
  url <- paste0("https://www.dhlottery.co.kr/gameResult.do?method=byWin&drwNo=", round)
  page <- read_html(url)
  
  numbers <- page %>% 
    html_nodes(".ball_645") %>%
    html_text() %>%
    as.numeric()
  
  return(numbers)
}

# Initialize an empty list to store lotto numbers
lotto_numbers <- list()

# Loop to get lotto numbers for the last 10 rounds
for (i in 1:10) {
  round <- 1071 - i + 1  # Adjust this to the latest round
  numbers <- get_lotto_numbers(round)
  if(length(numbers) > 0) {
    lotto_numbers <- c(lotto_numbers, list(numbers))
  }
  Sys.sleep(2)
}

# Check if lotto_numbers is not empty
if(length(lotto_numbers) > 0) {
  # Unlist and convert to a data frame
  lotto_numbers_df <- data.frame(number = unlist(lotto_numbers))
} else {
  stop("No data was scraped.")
}

# Count the frequency of each number
lotto_counts <- lotto_numbers_df %>%
  group_by(number) %>%
  summarize(count = n()) %>%
  arrange(desc(count))

# Plot the frequency of each number
ggplot(lotto_counts, aes(x = factor(number), y = count)) +
  geom_bar(stat = "identity", fill = "blue") +
  labs(title = "로또 당첨번호 빈도수",
       x = "번호",
       y = "빈도수") +
  theme_minimal()
```
